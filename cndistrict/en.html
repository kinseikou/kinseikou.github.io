<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
		<meta name="robots" content="all">
		<meta name="referrer" content="always">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Cache-Control" content="no-transform" />
		<meta name="format-detection" content="telephone=no"/>
		<title>China's Administrative Division Data and Resolution of Chinese ID card number</title>
		<link rel="stylesheet" href="static/style/index.css">
	</head>
	<body>
		<div class="wrapper">
			<div class="header">
				<div class="inner">
					<div class="mod-head">


						<div class="bd">
							<div style="float:left;">
						<a class="btn" href="/cndistrict/">中文</a>
								<a class="btn" href="/cndistrict/en.html">English</a>
								<a class="btn" href="/cndistrict/jp.html">日本語</a>
							</div>
							<a class="btn" href="/">Personal Website</a>
							<a class="btn" href="/docs/cn_location">Return to the Doc →</a>
						</div>
				</div>
			</div>
			<div class="container">
				<div class="mod-panel">
					<div class="inner">
						<div class="hd">
							<h1>China's Administrative Division Data<span class="tag">Tools</span></h1>
							<p>There are <b>34</b> provincial administrative regions in China，including <b>23</b> provinces, <b>5</b> autonomous regions、 <b>4</b> municipalities directly under the Central Government and <b>2</b> special administrative regions.<p>
							<p>Among them, There are <b class="city1">-</b> prefecture-level cities, <b class="city2">-</b> districts, <b class="city3">-</b> autonomous prefectures and <b class="city4">-</b> leagues in prefecture-level administrative regions in the mainland.</p>
							<p>There are <b class="county1">-</b> municipal districts, <b class="county2">-</b> county-level cities, <b class="county3">-</b> counties, <b class="county4">-</b> autonomous counties, <b class="county5">-</b> banners, <b class="county6">-</b> autonomous areas, <b class="county7">-</b> special regions and <b class="county8">-</b> 
forest areas in county-level administrative regions.</p>
						</div>
						<div class="bd">
							<div id="location" class="box">
								<div class="c-hd">
									<span class="title">Query of Administrative Division History</span>

								</div>
								<div class="c-bd">
									<p>
										<select name="province"></select>
					                    <select name="city"></select>
					                    <select name="area"></select>
									</p>
									<div class="table-inner"></div>
								</div>
							</div>
							<div id="search" class="box">
								<div class="c-hd">
									<span class="title">Fuzzy Search of Administrative Division</span>
								</div>
								<div class="c-bd">
									<form action="" method="post">
										<p>
											<input type="text" name="location" value="" maxlength="18" placeholder="Please enter the place name."/>
										</p>
									</form>
								</div>
							</div>
							<div id="idcard" class="box">
								<div class="c-hd"><span class="title">ID Card Number Resolution</span></div>
								<div class="c-bd">
									<form action="" method="post">
										<p>
											<input type="text" name="id" value="" maxlength="18" placeholder="Please enter the ID number."/>
											<button class="btn">Analysis</button>
										</p>
									</form>
									<div class="table-inner"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mod-article">
					<div class="inner">
						<div class="bd">
							<p>Administrative Division is the division of land, political and administrative power implemented by the country for hierarchical management. Generally speaking, administrative divisions are marked by the establishment of different levels of political power institutions in different regions in order to fully realize the smooth realization of various functions of local state institutions. The level of administrative division is related to the central and local relationship model of a country, the size of the land area, the relationship between the government and the public, and other factors.</p>
							<p>The administrative division code, also known as the administrative code, is the identification symbol of the national administrative organ. Generally, two national standards are implemented: the Administrative Division Code of the People's Republic of China (GB/T2260-2007) and the Rules for the Preparation of Administrative Division Codes Below the County (GB/T10114-2003). It is composed of 9 Arabic digits, which is equivalent to the identity number of the organization. According to the Regulations on the Administration of Administrative Divisions of the State Council, the code of administrative divisions shall be determined and issued by the civil affairs department. This standard specifies the codes of administrative divisions above the county level in China. Six Arabic numerals are used to represent the names of provinces (autonomous regions, municipalities directly under the Central Government), regions (cities, prefectures, alliances), and counties (districts, cities, and banners) in China. The code means:</p>
							<p>The first and second digits refer to provinces (autonomous regions, municipalities directly under the Central Government, and special administrative regions).</p>
							<p>The third and fourth digits refer to the city (the summary code of the municipal districts and counties under the jurisdiction of the region, autonomous prefecture, league and national municipality directly under the Central Government). Where, 01-20 and 51-70 refer to provinces and municipalities directly under the Central Government; 21-50 refers to the region (autonomous prefecture, league).</p>
							<p>The fifth and sixth places refer to counties (municipal districts, county-level cities and banners). 01-20 refers to county-level cities under the jurisdiction of municipal districts or regions (autonomous prefectures, alliances); 21-70 means county (flag); 81-99 refers to provincial and county-level cities; 71-80 refers to industrial park or economic development zone.</p>
						</div>
					</div>
				</div>
				<div class="mod-foot">
					<div class="inner">
						<div class="bd">
							<p>Copyright &copy; 2023 <a href="/">Jin Shenghao</a></p>
							<p>To ensure the faithfulness of the content, the toponym in this tool is written in Chinese.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="https://jquerywidget.com/public/script/jquery.min.js"></script>
		<script type="text/javascript" src="https://jquerywidget.com/code/jquery.citys.js"></script>
		<script type="text/javascript" src="https://jquerywidget.com/code/jquery.suggestion.js"></script>
        <script type="text/javascript" src="static/script/locationSearch.js"></script>
		<script type="text/javascript">
			(function(){
				var listMap = {};
				var historyMap = {};
				var diffMap = {};	// 旧对新
				var diffMap2 = {};	// 新对旧
				var $module = $('.mod-panel');
				var getName = function(code){
					var code1 = code.replace(/\d{4}$/,'0000');
					var code2 = code.replace(/\d{2}$/,'00');
					var code3 = code;
					if(code.match(/^(11|12|31|50)\d{4}/)||code.match(/^\d{2}90\d{2}$/)){
						return (historyMap[code1]||'')  + (code2!=code3?(historyMap[code3]||''):'');
					}else{
						return (historyMap[code1]||'') + (code1!=code2?(historyMap[code2]||''):'') + (code2!=code3?(historyMap[code3]||''):'');
					}
				};
				var isValid = function(id){
					id = id.toLowerCase();
					var id17 = id.substr(0,17);
					var last = id.charAt(17);
	                var sum = 0;
	                var factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
	                id17.split('').forEach(function(value,index){
	                    sum += factor[index]*value;
	                });
	                var lastLetter = ["1", "0", "X", "9", "8", "7", "6", "5", "4", "3", "2"];
	                var mod = sum%lastLetter.length;
					return lastLetter[mod]==last;
				};
				// 当前数据统计
				$.getJSON('https://passer-by.com/data_location/list.json',function(map){
					listMap = map;
					var city1 = 0,city2 = 0,city3 = 0,city4 = 0;
					var county1 = 0,county2 = 0,county3 = 0,county4 = 0,county5 = 0,county6 = 0,county7 = 0,county8 = 0;
					for(var code in listMap){
						if(code.match(/00$/)&&!code.match(/0000$/)&&code<'710000'){
							if(listMap[code].match(/市$/)){
								city1++;
							}else if(listMap[code].match(/地区$/)){
								city2++;
							}else if(listMap[code].match(/自治州$/)){
								city3++;
							}else if(listMap[code].match(/盟$/)){
								city4++;
							}
						}else if(!code.match(/00$/)&&!code.match(/0000$/)&&code<'710000'){
							if(listMap[code].match(/市$/)){
								county2++;
							}else if(listMap[code].match(/特区$/)){
								county7++;
							}else if(code.match(/90\d{2}$/)&&listMap[code].match(/林区$/)){
								county8++;
							}else if(listMap[code].match(/区$/)){
								county1++;
							}else if(listMap[code].match(/自治县$/)){
								county4++;
							}else if(listMap[code].match(/县$/)){
								county3++;
							}else if(listMap[code].match(/自治旗$/)){
								county6++;
							}else if(listMap[code].match(/旗$/)){
								county5++;
							}
						}
					}
					$module.find('.city1').text(city1);
					$module.find('.city2').text(city2);
					$module.find('.city3').text(city3);
					$module.find('.city4').text(city4);

					$module.find('.county1').text(county1);
					$module.find('.county2').text(county2);
					$module.find('.county3').text(county3);
					$module.find('.county4').text(county4);
					$module.find('.county5').text(county5);
					$module.find('.county6').text(county6);
					$module.find('.county7').text(county7);
					$module.find('.county8').text(county8);

					var searchItem = new locationSearch(map);
					$location = $('.mod-panel input[name="location"]').suggestion({
						dynamic:false,
						autoSubmit:false,
						onCallback:function(){
							var location = $location.val();
							if(location){
								result = searchItem.query(location);
								if(result.length>10){
									result = 10;
								}
								return result;
							}
							return [];
						}
					});
				});

				// 行政区划历史查询
				$.getJSON('https://passer-by.com/data_location/history.json',function(map){
					historyMap = map;
					$.getJSON('https://passer-by.com/data_location/diff.json',function(map){
						diffMap = map;
						for(var code in diffMap){
							diffMap[code].forEach(function(value){
								if(typeof diffMap2[value]=='undefined'){
									diffMap2[value] = [];
								}
								diffMap2[value].push(code);
							});
						}

						var $location = $('#location');
						$location.citys({
							'code':'110101',
							'onChange':function(data){
								var code = data['code'].toString();
								var trs_html = [];
								if(diffMap2[code]){
									trs_html = diffMap2[code].map(function(value){
										return '<tr><td>'+value+'</td><td>'+getName(value)+'</td></tr>';
									});
									$location.find('.table-inner').html('<table><caption>Current Administrative Division</caption><thead><tr><th width="25%">Zoning Code</th><th>Address of Administrative Division</th></tr></thead><tbody><tr><td>'+code+'</td><td>'+getName(code)+'</td></tr></tbody></table>\
									<table><caption>Historical Administrative Divisions</caption><thead><tr><th width="25%">Zoning code</th><th>Address of Administrative Division</th></tr></thead><tbody>'+trs_html.join('')+'</tbody></table>');
								}else{
									$location.find('.table-inner').html('<table><caption>Current Administrative Division</caption><thead><tr><th width="25%">Zoning Code</th><th>Address of Administrative Division</th></tr></thead><tbody><tr><td>'+code+'</td><td>'+getName(code)+'</td></tr></tbody></table>\
									<table><caption>Historical Administrative Divisions</caption><thead><tr><th width="25%">Zoning code</th><th>Address of Administrative Division</th></tr></thead><tbody><tr><td colspan="2" align="center">No Data</td></tr></tbody></table>');
								}
							}
						});

						var $idcard = $('#idcard');
						$idcard.find('form').on('submit',function(){
							var $this = $(this);
							var value = $this.find('input[type="text"]').val();
							var code = value.substr(0,6);
							var date = value.substr(6,8);
							var sex = value.charAt(16)%2?'男':'女';
							if(!value.match(/^\d{17}[0-9xX]$/)){
								alert('身份证号码格式错误！');
							}else{
								newAddress = '';
								if(diffMap[code]){
									newAddress = '<tr>\
										<td class="th"><span>现所属地</span></td>\
										<td>'+diffMap[code].map(function(value){return '<p>'+getName(value)+'</p>';})+'</td>\
									</tr>';
								}
								$idcard.find('.table-inner').html('<table>\
									<tbody>\
										<tr><td class="th" width="25%">首次签发地</td><td>'+getName(code)+'</td></tr>\
										'+newAddress+'\
										<tr><td class="th">出生日期</td><td>'+date.replace(/(\d{4})(\d{2})(\d{2})/,'$1年$2月$3日')+'</td></tr>\
										<tr><td class="th">性别</td><td>'+sex+'</td></tr>\
										<tr><td class="th">有效性</td><td>'+(isValid(value)?'<span class="text-green">有效</span>':'<span class="text-red">无效</span>')+'</td></tr>\
									</tbody>\
								</table>');
							}
							return false;
						});
					});
				});



			})();
		</script>
		<script async defer src="https://cdn.bootcdn.net/ajax/libs/github-buttons/2.21.1/buttons.min.js"></script>
		<script>
      		var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?b86879c9cc57dd112fe1f7dd75206b82";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
      	</script>
		<script>
			(function(){
			    var bp = document.createElement('script');
			    var curProtocol = window.location.protocol.split(':')[0];
			    if (curProtocol === 'https') {
			        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			    }
			    else {
			        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			    }
			    var s = document.getElementsByTagName("script")[0];
			    s.parentNode.insertBefore(bp, s);
			})();
		</script>
		<!-- <script type="text/javascript" src="https://passer-by.com/public/script/projects.js"></script> -->
	</body>
</html>

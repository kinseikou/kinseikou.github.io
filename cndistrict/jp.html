<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
		<meta name="robots" content="all">
		<meta name="referrer" content="always">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Cache-Control" content="no-transform" />
		<meta name="format-detection" content="telephone=no"/>
		<title>中国行政区画データ 身分証明書番号解析</title>
		<link rel="stylesheet" href="static/style/index.css">
	</head>
	<body>
		<div class="wrapper">
			<div class="header">
				<div class="inner">
					<div class="mod-head">


						<div class="bd">
							<div style="float:left;">
						<a class="btn" href="/cndistrict/">中文</a>
								<a class="btn" href="/cndistrict/en.html">English</a>
								<a class="btn" href="/cndistrict/jp.html">日本語</a>
							</div>
							<a class="btn" href="/">個人向けサイト</a>
							<a class="btn" href="/docs/cn_location">ドキュメントに戻る→</a>
						</div>

					</div>
				</div>
			</div>
			<div class="container">
				<div class="mod-panel">
					<div class="inner">
						<div class="hd">
							<h1>中国行政区画データ<span class="tag">ツール</span></h1>
<!-- 							<p>行政区划共有<b>34</b>个省级行政区，包含<b>23</b>个省、<b>5</b>个自治区、<b>4</b>个直辖市、<b>2</b>个特别行政区<p>
							<p>其中大陆地区地级行政区有<b class="city1">-</b>个地级市、<b class="city2">-</b>个地区、<b class="city3">-</b>个自治州、<b class="city4">-</b>个盟</p>
							<p>県级行政区有<b class="county1">-</b>个市辖区、<b class="county2">-</b>个県级市、<b class="county3">-</b>个県、<b class="county4">-</b>个自治県、<b class="county5">-</b>个旗、<b class="county6">-</b>个自治旗、<b class="county7">-</b>个特区、<b class="county8">-</b>个林区</p>
 -->
<p>    行政区画には<b>34</b>の省級行政区があり、<b>23</b>の省、<b>5</b>の自治区、<b>4</b>の直轄市、<b>2</b>の特別行政区が含まれている。<p>
							<p>    そのうち、大陸地区の地級行政区には<b class="city1">-</b>の地級市、<b class="city2">-</b>の地区、<b class="city3">-</b>の自治州、<b class="city4">-</b>の盟があり。</p>
								<p>    県級行政区には<b class="county1">-</b>の市轄区、<b class="county2">-</b>の県級市、<b class="county3">-</b>の県、<b class="county4">-</b>の自治県、<b class="county5">-</b>の旗、<b class="county6">-</b>の自治旗、<b class="county7">-</b>の特区、<b class="county8">-</b>の林区がある。</p>

						</div>
						<div class="bd">
							<div id="location" class="box">
								<div class="c-hd">
									<span class="title">行政区画履歴の照会</span>

								</div>
								<div class="c-bd">
									<p>
										<select name="province"></select>
					                    <select name="city"></select>
					                    <select name="area"></select>
									</p>
									<div class="table-inner"></div>
								</div>
							</div>
							<div id="search" class="box">
								<div class="c-hd">
									<span class="title">行政区画のファジィ検索</span>
								</div>
								<div class="c-bd">
									<form action="" method="post">
										<p>
											<input type="text" name="location" value="" maxlength="18" placeholder="探したい地名を入力してください。"/>
										</p>
									</form>
								</div>
							</div>
							<div id="idcard" class="box">
								<div class="c-hd"><span class="title">身分証明書番号の照会</span></div>
								<div class="c-bd">
									<form action="" method="post">
										<p>
											<input type="text" name="id" value="" maxlength="18" placeholder="身分証明書番号を入力してください。"/>
											<button class="btn">クエリー</button>
										</p>
									</form>
									<div class="table-inner"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mod-article">
					<div class="inner">
						<div class="bd">
							<p>行政区画とは、国が階層管理を行うために行う国土と政治、行政権力の区分である。一般的に言えば、行政区画は異なる地域内で、地方国家機構が様々な機能を円滑に実現するために設立された異なるレベルの政権機構をシンボルとしている。行政区画の階層は一国の中央地方関係モデル、国土面積の大きさ、政府と公衆の関係状況などの要素と関係がある。</p>
							<p>行政区画コード、行政コードとも呼ばれ、それは国家行政機関の識別記号であり、一般的に2つの国家基準を実行する：『中華人民共和国行政区画コード』（GB/T 2260-2007）と『県以下行政区画コード編成規則』（GB/T 10114-2003）。9桁のアラビア数字で構成され、機関単位の身分番号に相当する。国務院の「行政区画管理条例」の規定に基づき、行政区画コードは民政部門が確定し、公布する。この基準は我が国の県以上の行政区画のコードを規定し、我が国の省（自治区、直轄市）、地区（市、州、盟）、県（区、市、旗）の名称を6桁のアラビア数字で階層的に代表する。コードの左から右の意味は：</p>
							<p>第一、二位は省（自治区、直轄市、特別行政区）を表す。</p>
							<p>第三、四位は市（地域、自治州、同盟及び国家直轄市に属する市管轄区と県のまとめコード）を表す。このうち、01-20、51-70は省直轄市を示し、21〜50は地域（自治州、盟）を表す。</p>
							<p>第五、六位は県（市轄区、県級市、旗）を表す。01-20は市管轄区又は地区（自治州、盟）が県級市を管轄することを示し、21-70は県（旗）、81-99は省直轄県級市を示し、71〜80は工業団地または経済開発区を表す。</p>
						</div>
					</div>
				</div>
				<div class="mod-foot">
					<div class="inner">
						<div class="bd">
  <p>Copyright &copy; 2023 <a href="https://www.smileguide.github.io/">Jin Shenghao</a> · Adapted from mumuy</p>
  							<p>内容の忠実性を保証するために、本ツールの親戚名は中国語で書かれています。</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="https://jquerywidget.com/public/script/jquery.min.js"></script>
		<script type="text/javascript" src="https://jquerywidget.com/code/jquery.citys.js"></script>
		<script type="text/javascript" src="https://jquerywidget.com/code/jquery.suggestion.js"></script>
        <script type="text/javascript" src="static/script/locationSearch.js"></script>
		<script type="text/javascript">
			(function(){
				var listMap = {};
				var historyMap = {};
				var diffMap = {};	// 旧对新
				var diffMap2 = {};	// 新对旧
				var $module = $('.mod-panel');
				var getName = function(code){
					var code1 = code.replace(/\d{4}$/,'0000');
					var code2 = code.replace(/\d{2}$/,'00');
					var code3 = code;
					if(code.match(/^(11|12|31|50)\d{4}/)||code.match(/^\d{2}90\d{2}$/)){
						return (historyMap[code1]||'')  + (code2!=code3?(historyMap[code3]||''):'');
					}else{
						return (historyMap[code1]||'') + (code1!=code2?(historyMap[code2]||''):'') + (code2!=code3?(historyMap[code3]||''):'');
					}
				};
				var isValid = function(id){
					id = id.toLowerCase();
					var id17 = id.substr(0,17);
					var last = id.charAt(17);
	                var sum = 0;
	                var factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
	                id17.split('').forEach(function(value,index){
	                    sum += factor[index]*value;
	                });
	                var lastLetter = ["1", "0", "X", "9", "8", "7", "6", "5", "4", "3", "2"];
	                var mod = sum%lastLetter.length;
					return lastLetter[mod]==last;
				};
				// 当前数据统计
				$.getJSON('https://passer-by.com/data_location/list.json',function(map){
					listMap = map;
					var city1 = 0,city2 = 0,city3 = 0,city4 = 0;
					var county1 = 0,county2 = 0,county3 = 0,county4 = 0,county5 = 0,county6 = 0,county7 = 0,county8 = 0;
					for(var code in listMap){
						if(code.match(/00$/)&&!code.match(/0000$/)&&code<'710000'){
							if(listMap[code].match(/市$/)){
								city1++;
							}else if(listMap[code].match(/地区$/)){
								city2++;
							}else if(listMap[code].match(/自治州$/)){
								city3++;
							}else if(listMap[code].match(/盟$/)){
								city4++;
							}
						}else if(!code.match(/00$/)&&!code.match(/0000$/)&&code<'710000'){
							if(listMap[code].match(/市$/)){
								county2++;
							}else if(listMap[code].match(/特区$/)){
								county7++;
							}else if(code.match(/90\d{2}$/)&&listMap[code].match(/林区$/)){
								county8++;
							}else if(listMap[code].match(/区$/)){
								county1++;
							}else if(listMap[code].match(/自治県$/)){
								county4++;
							}else if(listMap[code].match(/県$/)){
								county3++;
							}else if(listMap[code].match(/自治旗$/)){
								county6++;
							}else if(listMap[code].match(/旗$/)){
								county5++;
							}
						}
					}
					$module.find('.city1').text(city1);
					$module.find('.city2').text(city2);
					$module.find('.city3').text(city3);
					$module.find('.city4').text(city4);

					$module.find('.county1').text(county1);
					$module.find('.county2').text(county2);
					$module.find('.county3').text(county3);
					$module.find('.county4').text(county4);
					$module.find('.county5').text(county5);
					$module.find('.county6').text(county6);
					$module.find('.county7').text(county7);
					$module.find('.county8').text(county8);

					var searchItem = new locationSearch(map);
					$location = $('.mod-panel input[name="location"]').suggestion({
						dynamic:false,
						autoSubmit:false,
						onCallback:function(){
							var location = $location.val();
							if(location){
								result = searchItem.query(location);
								if(result.length>10){
									result = 10;
								}
								return result;
							}
							return [];
						}
					});
				});

				// 行政区划历史查询
				$.getJSON('https://passer-by.com/data_location/history.json',function(map){
					historyMap = map;
					$.getJSON('https://passer-by.com/data_location/diff.json',function(map){
						diffMap = map;
						for(var code in diffMap){
							diffMap[code].forEach(function(value){
								if(typeof diffMap2[value]=='undefined'){
									diffMap2[value] = [];
								}
								diffMap2[value].push(code);
							});
						}

						var $location = $('#location');
						$location.citys({
							'code':'110101',
							'onChange':function(data){
								var code = data['code'].toString();
								var trs_html = [];
								if(diffMap2[code]){
									trs_html = diffMap2[code].map(function(value){
										return '<tr><td>'+value+'</td><td>'+getName(value)+'</td></tr>';
									});
									$location.find('.table-inner').html('<table><caption>現在の行政区画</caption><thead><tr><th width="25%">区画コード</th><th>行政区画のアドレス</th></tr></thead><tbody><tr><td>'+code+'</td><td>'+getName(code)+'</td></tr></tbody></table>\
									<table><caption>歴史行政区画</caption><thead><tr><th width="25%">区画コード</th><th>行政区画のアドレス</th></tr></thead><tbody>'+trs_html.join('')+'</tbody></table>');
								}else{
									$location.find('.table-inner').html('<table><caption>現在の行政区画</caption><thead><tr><th width="25%">区画コード</th><th>行政区画のアドレス</th></tr></thead><tbody><tr><td>'+code+'</td><td>'+getName(code)+'</td></tr></tbody></table>\
									<table><caption>歴史行政区画</caption><thead><tr><th width="25%">区画コード</th><th>行政区画のアドレス</th></tr></thead><tbody><tr><td colspan="2" align="center">データなし</td></tr></tbody></table>');
								}
							}
						});

						var $idcard = $('#idcard');
						$idcard.find('form').on('submit',function(){
							var $this = $(this);
							var value = $this.find('input[type="text"]').val();
							var code = value.substr(0,6);
							var date = value.substr(6,8);
							var sex = value.charAt(16)%2?'男':'女';
							if(!value.match(/^\d{17}[0-9xX]$/)){
								alert('身分証明書番号の形式が間違っています。');
							}else{
								newAddress = '';
								if(diffMap[code]){
									newAddress = '<tr>\
										<td class="th"><span>現在の所属地</span></td>\
										<td>'+diffMap[code].map(function(value){return '<p>'+getName(value)+'</p>';})+'</td>\
									</tr>';
								}
								$idcard.find('.table-inner').html('<table>\
									<tbody>\
										<tr><td class="th" width="25%">初発行地</td><td>'+getName(code)+'</td></tr>\
										'+newAddress+'\
										<tr><td class="th">誕生日</td><td>'+date.replace(/(\d{4})(\d{2})(\d{2})/,'$1年$2月$3日')+'</td></tr>\
										<tr><td class="th">性別</td><td>'+sex+'</td></tr>\
										<tr><td class="th">エフェクティビティ</td><td>'+(isValid(value)?'<span class="text-green">有効</span>':'<span class="text-red">無効</span>')+'</td></tr>\
									</tbody>\
								</table>');
							}
							return false;
						});
					});
				});



			})();
		</script>
		<script async defer src="https://cdn.bootcdn.net/ajax/libs/github-buttons/2.21.1/buttons.min.js"></script>
		<script>
      		var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?b86879c9cc57dd112fe1f7dd75206b82";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
      	</script>
		<script>
			(function(){
			    var bp = document.createElement('script');
			    var curProtocol = window.location.protocol.split(':')[0];
			    if (curProtocol === 'https') {
			        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			    }
			    else {
			        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			    }
			    var s = document.getElementsByTagName("script")[0];
			    s.parentNode.insertBefore(bp, s);
			})();
		</script>
		<!-- <script type="text/javascript" src="https://passer-by.com/public/script/projects.js"></script> -->
	</body>
</html>
